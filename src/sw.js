import{PushData}from"./PushData";var version=35;console.log("Custom service worker functions for pr-webrtc: version=",version);self.addEventListener("notificationclick",e=>{e.notification.close();if("url"in e.notification.data){e.waitUntil(self.clients.openWindow(e.notification.data.url))}});self.addEventListener("push",e=>{var _e$data;var pushData=(_e$data=e.data)===null||_e$data===void 0?void 0:_e$data.json();var notificationOptions=PushData.guard(pushData)?{body:pushData.body,data:{url:pushData.url},requireInteraction:true,silent:false,icon:pushData.icon}:{body:"Unexpected push event (pr-webrtc)"};var title=PushData.guard(pushData)?pushData.title:"Fehlerhafte PushMsg";var promise1=self.registration.showNotification(title,notificationOptions);var promise2=self.clients.matchAll().then(clients=>{clients.forEach(client=>{var _e$data2;client.postMessage((_e$data2=e.data)===null||_e$data2===void 0?void 0:_e$data2.json())})});e.waitUntil(Promise.all([promise1,promise2]))});
//# sourceMappingURL=sw.js.map